import { Component, EventEmitter, Output } from '@angular/core';
import { NgFor, NgIf } from '@angular/common'; // Import necessary Angular directives

// Define interfaces
export interface UserProfileMenuItem {
  label: string;
  badge?: string;
}

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [NgFor, NgIf], // Include NgFor and NgIf in the imports array
  template: `
    <div class="navbar bg-base-100 sticky top-0 z-50">
      <!-- Left Side: Sidebar Toggle Button and Logo -->
      <div class="flex items-center space-x-2">
        <!-- Sidebar Toggle Button -->
        <button class="btn btn-square btn-ghost" (click)="onSidebarToggle()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            class="inline-block h-5 w-5 stroke-current"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>

        <!-- Parameterized Company Logo, hidden on small screens -->
        <div class="flex-none hidden md:block" [innerHTML]="companyLogo"></div>
      </div>

      <!-- Middle: Application Name -->
      <div class="flex-1 text-center md:text-left">
        <!-- Parameterized Application Name -->
        <a class="btn btn-ghost text-xl">{{ applicationName }}</a>
      </div>

      <!-- Right Side: Theme Selector and User Profile -->
      <div class="flex-none flex items-center space-x-2">
        <!-- Color Picker Button -->
        <button class="btn btn-ghost btn-circle" (click)="onColorPicker()">
          <!-- Color Picker Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2c5.523 0 10 4.477 10 10 0 3.182-2.03 6-5 6a1 1 0 00-1 1c0 .458-.249.891-.68 1.177A6.006 6.006 0 0112 20c-3.314 0-6-2.686-6-6 0-5.523 4.477-10 10-10zM7.05 13.232a1.5 1.5 0 11-2.121-2.121 1.5 1.5 0 012.121 2.121zm10.95-3.232a1.5 1.5 0 11-2.121-2.121 1.5 1.5 0 012.121 2.121zm-6 6a1.5 1.5 0 11-2.121-2.121 1.5 1.5 0 012.121 2.121zm0-8a1.5 1.5 0 11-2.121-2.121 1.5 1.5 0 012.121 2.121z" />
          </svg>
        </button>

        <!-- User Profile -->
        <div class="dropdown dropdown-end">
          <!-- Checkbox to control the dropdown visibility -->
          <input type="checkbox" id="userMenuDropdown" class="dropdown-toggle hidden" #dropdownCheckbox />
          <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
            <div class="w-10 rounded-full">
              <!-- Parameterized User Profile Image -->
              <img [src]="userProfileImage" alt="User Profile Image" (click)="dropdownCheckbox.checked = !dropdownCheckbox.checked" />
            </div>
          </div>
          <ul
            tabindex="0"
            class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow"
            [class.hidden]="!dropdownCheckbox.checked"
          >
            <li *ngFor="let item of userProfileMenuItems">
              <a (click)="onUserProfileMenuItemClick(item); dropdownCheckbox.checked = false" [class.justify-between]="item.badge">
                {{ item.label }}
                <span *ngIf="item.badge" class="badge">{{ item.badge }}</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  `,
})
export class AppComponent {
  // Parameterized properties
  applicationName: string = 'Application Name';
  userProfileImage: string = 'https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp';

  // Company logo SVG as a string
  companyLogo: string = `
    <svg width="200" height="50" xmlns="http://www.w3.org/2000/svg">
      <!-- Text -->
      <text
        x="50%"
        y="50%"
        font-family="Arial, sans-serif"
        font-size="26"
        fill="#2C4770"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        Morgan Stanley
      </text>
    </svg>
  `;

  // Parameterized user profile dropdown menu items
  userProfileMenuItems: UserProfileMenuItem[] = [
    { label: 'Profile', badge: 'New' },
    { label: 'Settings' },
    { label: 'Logout' },
  ];

  // Output events
  @Output() sidebarToggled = new EventEmitter<void>();
  @Output() menuItemSelected = new EventEmitter<UserProfileMenuItem>();
  @Output() colorPickerSelected = new EventEmitter<void>();

  // Event handler for sidebar toggle button
  onSidebarToggle(): void {
    console.log('Sidebar toggle button clicked');
    this.sidebarToggled.emit(); // Emit the sidebar toggle event
  }

  // Event handler for color picker button
  onColorPicker(): void {
    console.log('Color picker button clicked');
    this.colorPickerSelected.emit(); // Emit the color picker event
  }

  // Event handler for user profile menu item click
  onUserProfileMenuItemClick(item: UserProfileMenuItem): void {
    console.log('User profile menu item clicked:', item.label);
    this.menuItemSelected.emit(item); // Emit the selected menu item
  }
}
